<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maya 4 — Veg Fryer 3 & 4 Alert Time Distribution (SGT)</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f9fb; color: #1a1a2e; padding: 24px; }
  .container { max-width: 1100px; margin: 0 auto; }
  h1 { font-size: 22px; font-weight: 700; color: #2F5496; margin-bottom: 4px; }
  .subtitle { font-size: 13px; color: #777; margin-bottom: 24px; }
  .cards { display: flex; gap: 16px; margin-bottom: 24px; flex-wrap: wrap; }
  .card { background: #fff; border-radius: 10px; padding: 18px 22px; flex: 1; min-width: 140px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); }
  .card .label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #999; margin-bottom: 4px; }
  .card .value { font-size: 28px; font-weight: 700; }
  .card .detail { font-size: 11px; color: #999; margin-top: 2px; }
  .card.veg3 .value { color: #e74c3c; }
  .card.veg4 .value { color: #f39c12; }
  .card.peak .value { color: #2F5496; }
  .chart-wrapper { background: #fff; border-radius: 12px; padding: 28px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); margin-bottom: 20px; }
  .chart-title { font-size: 15px; font-weight: 600; color: #333; margin-bottom: 16px; }
  .chart-box { position: relative; height: 380px; }
  .row { display: flex; gap: 20px; }
  .row .chart-wrapper { flex: 1; }
  .insight-box { background: #fff; border-radius: 12px; padding: 22px 26px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); margin-bottom: 20px; }
  .insight-box h3 { font-size: 14px; font-weight: 600; color: #2F5496; margin-bottom: 10px; }
  .insight-box ul { list-style: none; padding: 0; }
  .insight-box li { padding: 6px 0; font-size: 13px; color: #444; border-bottom: 1px solid #f0f0f0; }
  .insight-box li:last-child { border-bottom: none; }
  .insight-box li strong { color: #2F5496; }
  .dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 6px; vertical-align: middle; }
  .dot.red { background: #e74c3c; }
  .dot.orange { background: #f39c12; }
</style>
</head>
<body>
<div class="container">
  <h1>Maya 4 — Veg Fryer 3 & 4: Basket Not Empty Alerts</h1>
  <p class="subtitle">Time-of-day distribution (Singapore Time, SGT/UTC+8) across Nov 10, 2025 – Feb 4, 2026 (175 alerts total)</p>
  <div class="cards">
    <div class="card veg3"><div class="label">Veg Fryer 3</div><div class="value">112</div><div class="detail">35 firing · 32 resolved · 45 notif</div></div>
    <div class="card veg4"><div class="label">Veg Fryer 4</div><div class="value">63</div><div class="detail">12 firing · 8 resolved · 43 notif</div></div>
    <div class="card peak"><div class="label">Peak Hour</div><div class="value">11 PM</div><div class="detail">28 combined alerts</div></div>
    <div class="card peak"><div class="label">Active Window</div><div class="value">12p–11p</div><div class="detail">91% of all alerts</div></div>
  </div>
  <div class="chart-wrapper"><div class="chart-title"><span class="dot red"></span>Veg Fryer 3 &nbsp;&nbsp;<span class="dot orange"></span>Veg Fryer 4 — Alerts by Hour of Day (SGT)</div><div class="chart-box"><canvas id="barChart"></canvas></div></div>
  <div class="row"><div class="chart-wrapper"><div class="chart-title">Combined Heatmap — Alert Density by Hour (SGT)</div><div class="chart-box" style="height:120px;"><canvas id="heatChart"></canvas></div></div></div>
  <div class="row">
    <div class="chart-wrapper" style="flex:1;"><div class="chart-title">Veg Fryer 3 — Firing vs Resolved by Hour (SGT)</div><div class="chart-box" style="height:280px;"><canvas id="statusChart3"></canvas></div></div>
    <div class="chart-wrapper" style="flex:1;"><div class="chart-title">Veg Fryer 4 — Firing vs Resolved by Hour (SGT)</div><div class="chart-box" style="height:280px;"><canvas id="statusChart4"></canvas></div></div>
  </div>
  <div class="insight-box"><h3>Key Insights (Singapore Time)</h3><ul>
    <li><strong>11 PM is the #1 problem hour</strong> — 17 alerts for Veg Fryer 3 and 11 for Veg Fryer 4 (28 combined), accounting for 16% of all veg fryer alerts.</li>
    <li><strong>Late afternoon/evening surge (5 PM – 11 PM)</strong> — This window accounts for 100 alerts (57% of total), with sustained high activity across both fryers.</li>
    <li><strong>Noon spike at 12 PM</strong> — 21 combined alerts (11 Veg Fryer 3 + 10 Veg Fryer 4), the second-highest hour, likely tied to the lunch rush.</li>
    <li><strong>Quiet early hours (2 AM – 10 AM)</strong> — Only 12 alerts across this 9-hour window, confirming this is operationally driven during peak kiosk hours.</li>
    <li><strong>Veg Fryer 3 is 1.8x more problematic</strong> — 112 vs 63 alerts, with nearly 3x more firing alerts (35 vs 12).</li>
  </ul></div>
</div>
<script>
const hours = Array.from({length: 24}, (_, i) => i);
const labels = hours.map(h => { if (h === 0) return '12 AM'; if (h < 12) return h + ' AM'; if (h === 12) return '12 PM'; return (h - 12) + ' PM'; });
const veg3 = {0:3,1:1,8:3,10:3,11:2,12:11,13:3,14:4,15:4,16:3,17:10,18:11,19:8,20:11,21:9,22:9,23:17};
const veg4 = {0:1,1:1,11:2,12:10,13:3,14:5,15:2,16:2,17:4,18:5,19:8,20:1,21:2,22:6,23:11};
const v3data = hours.map(h => veg3[h] || 0);
const v4data = hours.map(h => veg4[h] || 0);
const v3firing =  [0,0,0,0,0,0,0,0,1,0,0,0,4,0,0,1,1,4,4,3,3,3,2,9];
const v3resolved =[1,0,0,0,0,0,0,0,1,0,0,0,0,2,2,1,1,3,4,2,4,3,3,5];
const v4firing =  [0,0,0,0,0,0,0,0,0,0,0,0,1,0,2,1,1,1,0,2,0,0,2,2];
const v4resolved =[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,2,0,0,1,2];
const combined = hours.map(h => (veg3[h]||0) + (veg4[h]||0));
const maxCombined = Math.max(...combined);
new Chart(document.getElementById('barChart'), { type: 'bar', data: { labels: labels, datasets: [{ label: 'Veg Fryer 3', data: v3data, backgroundColor: 'rgba(231,76,60,0.75)', borderColor: 'rgba(231,76,60,1)', borderWidth: 1, borderRadius: 4 }, { label: 'Veg Fryer 4', data: v4data, backgroundColor: 'rgba(243,156,18,0.75)', borderColor: 'rgba(243,156,18,1)', borderWidth: 1, borderRadius: 4 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top', labels: { usePointStyle: true, padding: 20, font: { size: 12 } } }, tooltip: { callbacks: { afterBody: function(items) { const h = items[0].dataIndex; return 'Combined: ' + (v3data[h] + v4data[h]); } } } }, scales: { x: { grid: { display: false }, ticks: { font: { size: 11 }, maxRotation: 45 } }, y: { beginAtZero: true, title: { display: true, text: 'Number of Alerts (SGT)', font: { size: 12 } }, ticks: { stepSize: 2 } } } } });
new Chart(document.getElementById('heatChart'), { type: 'bar', data: { labels: ['Alerts'], datasets: hours.map((h, i) => ({ label: labels[i], data: [combined[i]], backgroundColor: combined[i] === 0 ? '#eee' : 'rgba(47,84,150,' + (0.15 + (combined[i]/maxCombined)*0.85) + ')', borderWidth: 0, barPercentage: 1, categoryPercentage: 1 })) }, options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { callbacks: { title: (items) => labels[items[0].datasetIndex] + ' SGT', label: (item) => item.raw + ' alerts' } } }, scales: { x: { stacked: true, display: false }, y: { stacked: true, display: false } } } });
const activeHours = [0,1,8,10,11,12,13,14,15,16,17,18,19,20,21,22,23];
const activeLabels = activeHours.map(h => labels[h]);
new Chart(document.getElementById('statusChart3'), { type: 'bar', data: { labels: activeLabels, datasets: [{ label: 'Firing', data: activeHours.map(h => v3firing[h]), backgroundColor: 'rgba(231,76,60,0.8)', borderRadius: 3 }, { label: 'Resolved', data: activeHours.map(h => v3resolved[h]), backgroundColor: 'rgba(46,204,113,0.8)', borderRadius: 3 }, { label: 'Notification', data: activeHours.map(h => v3data[h] - v3firing[h] - v3resolved[h]), backgroundColor: 'rgba(52,152,219,0.5)', borderRadius: 3 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top', labels: { usePointStyle: true, font: { size: 11 } } } }, scales: { x: { stacked: true, grid: { display: false }, ticks: { font: { size: 10 }, maxRotation: 45 } }, y: { stacked: true, beginAtZero: true, ticks: { stepSize: 2 } } } } });
new Chart(document.getElementById('statusChart4'), { type: 'bar', data: { labels: activeLabels, datasets: [{ label: 'Firing', data: activeHours.map(h => v4firing[h]), backgroundColor: 'rgba(231,76,60,0.8)', borderRadius: 3 }, { label: 'Resolved', data: activeHours.map(h => v4resolved[h]), backgroundColor: 'rgba(46,204,113,0.8)', borderRadius: 3 }, { label: 'Notification', data: activeHours.map(h => v4data[h] - v4firing[h] - v4resolved[h]), backgroundColor: 'rgba(52,152,219,0.5)', borderRadius: 3 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top', labels: { usePointStyle: true, font: { size: 11 } } } }, scales: { x: { stacked: true, grid: { display: false }, ticks: { font: { size: 10 }, maxRotation: 45 } }, y: { stacked: true, beginAtZero: true, ticks: { stepSize: 2 } } } } });
</script>
</body>
</html>